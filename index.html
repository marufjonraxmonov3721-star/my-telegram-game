<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Empire Conquest RM</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root { --gold: #ffd700; --red: #ff4d4d; --bg: #0d1117; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Poppins', sans-serif; overflow: hidden; }
        
        .header { padding: 15px; background: #161b22; display: flex; justify-content: space-around; border-bottom: 2px solid #30363d; }
        .res-box { text-align: center; }
        .res-box span { display: block; font-size: 0.7rem; color: #8b949e; }
        .res-box b { font-size: 1.1rem; color: var(--gold); }

        .map-container { height: 65vh; display: flex; align-items: center; justify-content: center; position: relative; }
        .base-circle { width: 180px; height: 180px; border-radius: 50%; background: radial-gradient(circle, #238636, #2ea043); border: 5px solid #3fb950; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(46, 160, 67, 0.4); animation: pulse 2s infinite; }
        
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; }
        .btn { background: #21262d; border: 1px solid #30363d; color: white; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-attack { background: var(--red); border: none; }

        .page { display: none; padding: 20px; height: 80vh; overflow-y: auto; }
        .active-page { display: block; }

        .leaderboard-item { display: flex; justify-content: space-between; padding: 12px; background: #161b22; margin-bottom: 8px; border-radius: 10px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="res-box"><span>OLTIN</span><b id="gold-val">0</b></div>
        <div class="res-box"><span>DAROMLAD</span><b>+<span id="prod-val">10</span>/s</b></div>
        <div class="res-box"><span>ASKARLAR</span><b id="army-val">50</b></div>
    </div>

    <div id="p1" class="page active-page">
        <div class="map-container">
            <div class="base-circle">
                <i class="material-icons" style="font-size: 3rem;">fort</i>
                <span>SIZNING BAZANGIZ</span>
            </div>
        </div>
        <div class="btn-group">
            <button class="btn" onclick="upgradeProduction()"><i class="material-icons">trending_up</i>Zavod</button>
            <button class="btn" onclick="trainArmy()"><i class="material-icons">group_add</i>Armiya</button>
            <button class="btn btn-attack" onclick="show('p2')"><i class="material-icons">flash_on</i>HUJUM</button>
            <button class="btn" onclick="show('p3')"><i class="material-icons">emoji_events</i>TOP</button>
        </div>
    </div>

    <div id="p3" class="page">
        <h2 style="color: var(--gold);"><i class="material-icons">emoji_events</i> Dunyo Reytingi</h2>
        <div id="leaderboard-list">
            </div>
        <button class="btn" onclick="show('p1')" style="width: 100%; margin-top: 20px;">Orqaga</button>
    </div>

    <div id="p2" class="page">
        <h2><i class="material-icons">search</i> Qurbon qidirish</h2>
        <p style="color: #8b949e;">Atrofingizdagi bazalarga hujum qilib oltinlarini oling!</p>
        <div id="attack-list">
            </div>
        <button class="btn" onclick="show('p1')" style="width: 100%; margin-top: 20px;">Orqaga</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        let gold = 100, production = 5, army = 20;

        function updateUI() {
            document.getElementById('gold-val').innerText = Math.floor(gold).toLocaleString();
            document.getElementById('prod-val').innerText = production;
            document.getElementById('army-val').innerText = army;
        }

        function show(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(id).classList.add('active-page');
            if(id === 'p3') loadLeaderboard();
            if(id === 'p2') loadEnemies();
        }

        function upgradeProduction() {
            if(gold >= 50) { gold -= 50; production += 2; updateUI(); }
            else { tg.showAlert("Oltin yetarli emas!"); }
        }

        function trainArmy() {
            if(gold >= 30) { gold -= 30; army += 10; updateUI(); }
            else { tg.showAlert("Oltin yetarli emas!"); }
        }

        function loadLeaderboard() {
            const list = document.getElementById('leaderboard-list');
            list.innerHTML = `
                <div class="leaderboard-item"><span>1. Sardor_King</span><b>ðŸ’° 1.2M</b></div>
                <div class="leaderboard-item"><span>2. Bek_Empire</span><b>ðŸ’° 950K</b></div>
                <div class="leaderboard-item"><span>3. RM_Warrior</span><b>ðŸ’° 800K</b></div>
            `;
        }

        function loadEnemies() {
            const list = document.getElementById('attack-list');
            list.innerHTML = `
                <div class="leaderboard-item"><span>O'yinchi_882</span><button class="btn btn-attack" style="padding:5px 10px;" onclick="attack()">Hujum</button></div>
                <div class="leaderboard-item"><span>Noob_Master</span><button class="btn btn-attack" style="padding:5px 10px;" onclick="attack()">Hujum</button></div>
            `;
        }

        function attack() {
            if(army > 10) {
                let win = Math.random() > 0.5;
                if(win) {
                    let prize = Math.floor(Math.random() * 200);
                    gold += prize;
                    tg.showAlert("G'alaba! Siz " + prize + " oltin o'g'irladingiz!");
                } else {
                    army -= 10;
                    tg.showAlert("Mag'lubiyat! Armiyangiz talofat ko'rdi.");
                }
                updateUI();
            } else {
                tg.showAlert("Armiyangiz juda kuchsiz!");
            }
        }

        setInterval(() => {
            gold += (production / 10);
            updateUI();
        }, 100);

        tg.expand();
    </script>
</body>
</html>
